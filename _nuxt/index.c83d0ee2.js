import{r as l,p as U,w as A,e as q,k as F,q as G,f as a,u as n,l as t,s as h,v as _,x as w,y as T,z as v,A as O,m as u,B as y,C as D,F as R,D as $,E as H,o as d,t as M,G as J}from"./entry.abcdf86a.js";import K from"./Icon.db31fff9.js";import{u as Q}from"./useSupabaseClient.d26d72dc.js";import"./config.26fb153b.js";const X={key:0,class:"container flex flex-col justify-center mx-auto"},Y=t("h1",{class:"text-center text-2xl mt-4 mb-2"},"Login",-1),Z=["onSubmit"],ee=t("label",{for:"email",class:"text-sm font-semibold"},"Email",-1),te=t("label",{for:"password",class:"text-sm font-semibold"},"Password",-1),oe=t("button",{type:"submit",class:"block w-full px-4 py-2 mt-4 text-sm rounded bg-indigo-500 text-white hover:bg-indigo-600 focus:outline-none focus:ring focus:ring-indigo-200"}," Login ",-1),se=t("h2",{class:"text-center font-semibold mt-2"},"or",-1),ne={key:1},ie={class:"container mx-auto px-4 sm:px-6 lg:px-8"},le={class:"py-12 mt-3"},re={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ae={class:"flex justify-between flex-col items-center mb-6 border-indigo-400"},de=t("button",{class:"block px-4 w-48 py-2 mt-4 text-sm rounded bg-indigo-500 text-white hover:bg-indigo-600 focus:outline-none focus:ring focus:ring-indigo-200"}," Add Post ",-1),ce={class:"text-2xl font-semibold text-indigo-500 flex justify-center mb-5"},ue={key:0,class:"fixed w-full jus z-10 inset-0 overflow-y-auto"},me={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},fe={class:"bg-white flex justify-center flex-col rounded-lg px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},pe=J('<div class="sm:flex sm:items-start"><div class="mt-3 text-center sm:mt-0 sm:text-left"><h3 class="text-lg leading-6 font-medium text-gray-900">Delete Post</h3><div class="mt-2"><p class="text-sm text-gray-500">Are you sure you want to delete this post?</p></div></div></div>',1),ge={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},xe=["onClick"],ye={__name:"index",async setup(he){let m,k,r=l(""),c=l("");const f=Q(),C=U();async function E(){try{const{error:e}=await f.auth.signInWithPassword({email:r.value,password:c.value});if(e)throw e;alert("Signed In!")}catch(e){alert(e.error_description||e.message)}finally{}}async function W(){try{const{error:e}=await f.auth.signInWithOtp({email:r.value});if(e)throw e;alert("Check your email for the login link!")}catch(e){alert(e.error_description||e.message)}finally{}}let p=l([]);const g=l("");let i=l(!1),L=([m,k]=A(()=>f.from("posts").select("title, content, id").order("id",{ascending:!1})),m=await m,k(),m);L.data.forEach(e=>{let s=e.content.split(".");e.description=[s[0],s[1]," "].join(". ")}),p.value=L.data;const z=q(()=>g.value?p.value.filter(e=>e.title.toLowerCase().includes(g.value.toLowerCase())):p.value);let S=l(window.innerWidth);const j=()=>{S.value=window.innerWidth};F(()=>{window.addEventListener("resize",j)}),G(()=>{window.removeEventListener("resize",j)});const x=l(null);function B(e){x.value=e}function P(){x.value=null}async function I(){try{const{error:e}=await f.from("posts").delete().eq("id",x.value);if(e)throw e;alert("Post Deleted!"),p.value.splice(4,1)}catch(e){alert(e.error_description||e.message)}P()}return(e,s)=>{const b=H,V=K;return d(),a("div",null,[n(C)?v("",!0):(d(),a("div",X,[Y,t("form",{class:"w-80 mx-auto",onSubmit:T(E,["prevent"])},[ee,h(t("input",{id:"email","onUpdate:modelValue":s[0]||(s[0]=o=>w(r)?r.value=o:r=o),type:"email",class:"block w-full px-4 py-2 mt-2 mb-4 text-sm rounded border border-gray-300 focus:outline-none focus:ring focus:border-blue-300"},null,512),[[_,n(r)]]),te,h(t("input",{id:"password","onUpdate:modelValue":s[1]||(s[1]=o=>w(c)?c.value=o:c=o),type:"password",class:"block w-full px-4 py-2 mt-2 mb-4 text-sm rounded border border-gray-300 focus:outline-none focus:ring focus:border-blue-300"},null,512),[[_,n(c)]]),oe,se,t("button",{class:"block px-4 w-full py-2 mt-4 text-sm rounded bg-indigo-500 text-white hover:bg-indigo-600 focus:outline-none focus:ring focus:ring-indigo-200",onClick:W}," Send Magic Link ")],40,Z)])),n(C)?(d(),a("div",ne,[t("div",ie,[h(t("button",{onClick:s[2]||(s[2]=o=>w(i)?i.value=!n(i):i=!n(i)),class:"bg-indigo-500 hover:bg-indigo-700 text-white font-bold float-right mt-2 py-2 px-4 rounded"}," Toggle View ",512),[[O,n(S)>765]]),t("div",le,[t("div",re,[t("div",ae,[h(t("input",{type:"text",placeholder:"Search Blog Posts...","onUpdate:modelValue":s[3]||(s[3]=o=>g.value=o),class:"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-center text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-indigo-500"},null,512),[[_,g.value]]),u(b,{to:"/admin/new_post"},{default:y(()=>[de]),_:1})]),t("ul",{class:D(["max-h-screen overflow-y-auto grid gap-4",{"grid-cols-1":!n(i),"grid-cols-1 md:grid-cols-2 lg:grid-cols-4":n(i)}])},[(d(!0),a(R,null,$(n(z),o=>(d(),a("li",{class:D(["p-5 border-4 border-indigo-400 rounded-lg transition duration-500 ease-in-out transform hover:-translate-y-1 hover:scale-100 m-2",{"max-h-15":n(i)}]),key:o.id},[u(V,{onClick:N=>B(o.id),name:"fa6-solid:trash-can",color:"black",class:"ml-2 hover:-translate-y-1 hover:scale-100 float-right"},null,8,["onClick"]),u(b,{to:"/admin/"+o.id},{default:y(()=>[u(V,{name:"fa6-solid:pen-to-square",color:"black",class:"ml-2 hover:-translate-y-1 hover:scale-100 float-right"})]),_:2},1032,["to"]),u(b,{to:"/blog/"+o.id},{default:y(()=>[t("p",ce,M(o.title),1),t("p",null,M(o.description),1)]),_:2},1032,["to"]),x.value===o.id?(d(),a("div",ue,[t("div",me,[t("div",fe,[pe,t("div",ge,[t("button",{onClick:N=>I(o.id),class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm"}," Delete ",8,xe),t("button",{onClick:P,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):v("",!0)],2))),128))],2)])])])])):v("",!0)])}}};export{ye as default};
